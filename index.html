<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Draw a Word</title>
</head>
<body>
    <h1>Draw a Word</h1>

    <input type="text" id="username" placeholder="Enter your name">
    <input type="text" id="word" placeholder="Enter the word to draw">
    <br><br>
    <canvas id="drawingCanvas" width="400" height="200" style="border:1px solid #000;"></canvas>
    <br>
    <button onclick="saveDrawing()">Save Drawing</button>

    <!-- Static paragraph of text -->
    <h2>Instructions</h2>
    <p>
        Please enter your name and the word you want to draw. Once you're ready, use the canvas below to draw the word.
        When you're finished, click "Save Drawing" to save your artwork.
    </p>

    <!-- Firebase SDK v8.x -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    
    <script>
        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyCtAMQgkPJt8vMi_vuZRN6obsKYXdfrESE",
            authDomain: "tomato-c5977.firebaseapp.com",
            databaseURL: "https://tomato-c5977-default-rtdb.firebaseio.com/",
            projectId: "tomato-c5977",
            storageBucket: "tomato-c5977.appspot.com",
            messagingSenderId: "699409684619",
            appId: "1:699409684619:web:e6dd620f21d1f0d8a0dc8e",
            measurementId: "G-VYGJML1LZ5"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();

        function saveDrawing() {
            const username = document.getElementById('username').value;
            const word = document.getElementById('word').value;
            const timestamp = new Date().toISOString();

            if (username && word) {
                const canvas = document.getElementById('drawingCanvas');
                const dataURL = canvas.toDataURL();
                const drawingData = {
                    username: username,
                    word: word,
                    timestamp: timestamp,
                    drawing: dataURL
                };

                const drawingsRef = database.ref('drawings');
                drawingsRef.push(drawingData)
                    .then(() => {
                        alert('Drawing saved to Firebase!');
                    })
                    .catch(error => alert('Error saving drawing: ' + error.message));
            } else {
                alert('Please enter both your name and the word!');
            }
        }

        // Canvas drawing functionality
        const canvas = document.getElementById('drawingCanvas');
        const ctx = canvas.getContext('2d');
        let drawing = false;

        canvas.addEventListener('mousedown', startDrawing);
        canvas.addEventListener('mouseup', stopDrawing);
        canvas.addEventListener('mousemove', draw);

        function startDrawing(event) {
            drawing = true;
            ctx.beginPath();
            ctx.moveTo(event.offsetX, event.offsetY);
        }

        function stopDrawing() {
            drawing = false;
        }

        function draw(event) {
            if (!drawing) return;
            ctx.lineWidth = 2;
            ctx.lineCap = 'round';
            ctx.strokeStyle = 'black';

            ctx.lineTo(event.offsetX, event.offsetY);
            ctx.stroke();
        }
    </script>
</body>
</html>
